/****************************************************************************
 ** @license
 ** This file is part of yFiles for HTML 2.1.0.1.
 ** 
 ** yWorks proprietary/confidential. Use is subject to license terms.
 **
 ** Copyright (c) 2018 by yWorks GmbH, Vor dem Kreuzberg 28, 
 ** 72070 Tuebingen, Germany. All rights reserved.
 **
 ***************************************************************************/

import y from'./core.js';import l from'./lang.js';import'./algorithms.js';import'./layout-core.js';import'./layout-hierarchic.js';import'./router-other.js';(function(a,b,c,d){'use strict';function e(a,b,c){for(var d=0,e=0,f=b.$bRV();f.$Zx;f.$DB()){var g=f.$lx;1===c.$OD(g)?g.$f7>0&&e++:d+=g.$f6}return e<=1&&2===d}function f(b,c,d,f){for(var g=d.$EeV(a.T.ZBC.FAMILY_TYPE_DP_KEY),h=b.$f.$f11.$bRV();h.$Zx;h.$DB()){var i=h.$lx,j=c.$tbV(i);if(e(b,j,g)){f.$Ss(i,!0);for(var k=j.$bRV();k.$Zx;k.$DB()){var l=k.$lx;if(1!==g.$OD(l))for(var m=l.$HfV(null);m.$Zx;m.$DB())b.$f.$f4.$nI(m.$kx,null)}}}}function g(b,c,d,e,f){for(var g=c.$EeV(a.T.ZBC.FAMILY_TYPE_DP_KEY),h=b.$f.$f11.$bRV();h.$Zx;h.$DB()){var i=h.$lx;if(e.$Ks(i)){for(var j=d.$tbV(i),k=null,l=null,m=j.$bRV();m.$Zx;m.$DB()){var n=m.$lx;1!==g.$OD(n)&&n.$f6>0&&(null===k?k=n:l=n)}if(null!==k&&null!==l){var o=c.$caV(k),p=c.$caV(l),q=f.$m(k.$f11).$f,r=f.$m(l.$f11).$f;if(o>p&&q<r||o<p&&q>r)for(var s=c.$xeV(i),m=j.$bRV();m.$Zx;m.$DB()){var n=m.$lx,t=s.$f+s.$f3-(c.$caV(n)-s.$f);c.$WvW(n,t,c.$daV(n))}}}}}function h(b,c,d,e){for(var f=c.$EeV(a.T.ZBC.FAMILY_TYPE_DP_KEY),g=b.$f.$f11.$bRV();g.$Zx;g.$DB()){var h=g.$lx;if(e.$Ks(h))for(var i=d.$tbV(h),j=i.$bRV();j.$Zx;j.$DB()){var k=j.$lx;if(1!==f.$OD(k))for(var l=k.$HfV(null);l.$Zx;l.$DB()){var m=l.$kx;c.$KuW(m,new a.C.IRA.$G(0,-c.$m38(k).$Hz/2)),b.$f.$f4.$nI(m,a.T.FAC.$G(1,!0))}}}}function i(b,c){b.$f20=a.T.WSA.$R();var d=c.$EeV(a.T.ZBC.FAMILY_TYPE_DP_KEY);if(null!==d)for(var e=c.$dUV();e.$Zx;e.$DB()){var f=e.$lx;1===d.$OD(f)&&b.$f20.$tI(f,f.$f7)}}function j(b,c){b.$f21=a.T.WSA.$R();var d=c.$EeV(a.T.ZBC.FAMILY_TYPE_DP_KEY);if(null!==d)for(var e=c.$dUV();e.$Zx;e.$DB()){var f=e.$lx;1===d.$OD(f)&&b.$f21.$tI(f,f.$f6)}}function k(b,c,d){var e=c.$EeV(a.T.ZBC.FAMILY_TYPE_DP_KEY);b.$f16=c.$aUV(),b.$f17=c.$aUV(),b.$f3=c.$aUV(),b.$f4=c.$aUV(),b.$f12 instanceof a.C.EDC&&0!==b.$f19&&(b.$f=b.$f12.$CpW(c)),l(b,c,d);for(var f=c.$dUV();f.$Zx;f.$DB()){var g=f.$lx;if(1===c.$EeV(a.T.ZBC.FAMILY_TYPE_DP_KEY).$OD(g)){for(var h=null,i=g.$tgV(null);i.$Zx;i.$DB()){var j=i.$kx.$f3;null===h&&(h=j),c.$IuW(i.$kx,new a.C.IRA.$G(0,c.$m38(i.$kx.$f2).$Hz/2)),c.$KuW(i.$kx,new a.C.IRA.$G(0,-c.$m38(i.$kx.$f3).$Hz/2)),b.$f3.$nI(i.$kx,a.T.FAC.$G(2,!0)),b.$f4.$nI(i.$kx,a.T.FAC.$G(1,!0)),null!==b.$f&&h!==j&&(2!==(4===b.$f19||3===b.$f19)===e.$OD(j)?b.$f.$hL(h,j):b.$f.$jL(h,j))}for(var k=new a.GD,m='CG'+g.$XT,n=g.$tgV(null);n.$Zx;n.$DB()){var o=n.$kx;b.$f16.$nI(o,m);var p=b.$f15.$OD(o.$f3);null!==p&&-1!==k.$nw(p)||(b.$f17.$nI(o,m),null!==p&&k.$m(p))}}}c.$KtW(a.T.HAC.SOURCE_GROUP_ID_DP_KEY,b.$f16),c.$KtW(a.T.HAC.TARGET_GROUP_ID_DP_KEY,b.$f17),c.$KtW(a.T.HAC.SOURCE_PORT_CONSTRAINT_DP_KEY,b.$f3),c.$KtW(a.T.HAC.TARGET_PORT_CONSTRAINT_DP_KEY,b.$f4)}function l(b,c,d){b.$f5=a.DE.$m14(c.$ud),b.$f1=new a.GD;var e=new a.GD;b.$f11=new a.C.GSA.$F,b.$f2=c.$bUV(),b.$f15=c.$bUV(),b.$f6=c.$bUV(),b.$f9=c.$bUV(),b.$f8=c.$bUV();for(var f=c.$dUV();f.$Zx;f.$DB()){var g=new a.C.GSA.$F,h=f.$lx;b.$f2.$nI(h,'n'+h.$XT),1===c.$EeV(a.T.ZBC.FAMILY_TYPE_DP_KEY).$OD(h)?m(b,h,g):n(b,h,g);var i=new a.GD;i.$m(g),o(b,g,i);for(var j=0;j<i.$xq;j++)if(g=i.$Bq(j),g.$f1>1){for(var k=new a.LF.$c1('GN'),l=0;l<g.$f1;l++)k.$m2(a.EE.$m8(g.$Bq(l).$XT)),k.$m2('/');e.$m(k.toString()),b.$f1.$m(g)}}for(var p=0;p<b.$f1.$xq;p++){var q=new a.C.ZQA(0,0,0,0),r=c.$YTV(),g=b.$f1.$Bq(p);b.$f11.$m3(r);for(var s=0;s<g.$f1;s++){var t=g.$Bq(s);b.$f15.$nI(t,e.$Bq(p)),b.$f9.$nI(t,d),b.$f8.$nI(t,q)}b.$f8.$nI(r,q),b.$f6.$Ss(r,!0),b.$f2.$nI(r,e.$Bq(p))}c.$KtW(a.T.PXB.NODE_ID_DP_KEY,b.$f2),c.$KtW(a.T.PXB.PARENT_NODE_ID_DP_KEY,b.$f15),c.$KtW(a.T.PXB.GROUP_DP_KEY,b.$f6),c.$KtW(a.T.PXB.GROUP_NODE_INSETS_DP_KEY,b.$f8),c.$KtW(a.T.BZB.LAYOUT_DP_KEY,b.$f9)}function m(b,c,d){if(1!==c.$f2.$EeV(a.T.ZBC.FAMILY_TYPE_DP_KEY).$OD(c))throw a.QE.$m30(v[4]);if(!b.$f5[c.$XT]){d.$m3(c),b.$f5[c.$XT]=!0;for(var e=0,f=c.$vVV();f.$Zx;f.$DB())if(n(b,f.$lx,d),++e>2)throw a.QE.$m30(v[5])}}function n(b,c,d){if(1===c.$f2.$EeV(a.T.ZBC.FAMILY_TYPE_DP_KEY).$OD(c))throw a.QE.$m30(v[6]);if(!b.$f5[c.$XT]){d.$m3(c),b.$f5[c.$XT]=!0;for(var e=c.$nVV();e.$Zx;e.$DB())m(b,e.$lx,d)}}function o(b,c,d){var e=-1,f=-1;for(e=0;e<c.$f1;e++){var g=c.$Bq(e);if(1===g.$f2.$EeV(a.T.ZBC.FAMILY_TYPE_DP_KEY).$OD(g)){for(var h=g.$nVV();h.$Zx&&!((f=c.$nw(h.$lx))>-1);h.$DB());if(f>-1)break}}if(-1!==f){var i=new a.C.GSA.$F,j=c.$Bq(e),k=c.$Bq(f),l=new a.C.GSA.$F;c.$mw(k),i.$m3(k);for(var h=k.$nVV();h.$Zx;h.$DB()){var m=h.$lx;c.$mw(m),i.$m3(m);for(var n=m.$vVV();n.$Zx;n.$DB()){var q=n.$lx;q!==k&&(p(b,m,q,j,k)?r(b,m,c,i):l.$m3(m))}}for(var h=l.$bRV();h.$Zx;h.$DB())for(var s=h.$lx,t=s.$HfV(null);t.$Zx;t.$DB())if(t.$kx.$f2!==k){var u=k.$f2;u.$IuW(t.$kx,new a.C.IRA.$G(0,0)),u.$KuW(t.$kx,new a.C.IRA.$G(0,0)),b.$f3.$nI(t.$kx,a.T.FAC.$G(0,!0)),b.$f4.$nI(t.$kx,a.T.FAC.$G(0,!0))}o(b,c,d),o(b,i,d),d.$m(i)}}function p(b,c,d,e,f){return q(b,c,d,e,f,new a.ND)}function q(b,c,d,e,f,g){if(!a.LD.$m9(g,new a.T.ZBC.T(c,d)))return!0;for(var h=d.$nVV();h.$Zx;h.$DB()){var i=h.$lx;if(i!==c){if(i===e)return!1;for(var j=i.$vVV();j.$Zx;j.$DB()){var k=j.$lx;if(k!==d){if(k===f)return!0;if(!q(b,i,k,e,f,g))return!1}}}}return!0}function r(a,b,c,d){for(var e=b.$vVV();e.$Zx;e.$DB()){var f=e.$lx;if(!(c.$nw(f)<0)){c.$mw(f),d.$m3(f);for(var g=f.$nVV();g.$Zx;g.$DB()){var h=g.$lx;c.$nw(h)>-1&&(c.$mw(h),d.$m3(h),r(a,h,c,d))}}}}function s(b,c){null!==b.$f16&&(c.$BiV(a.T.HAC.SOURCE_GROUP_ID_DP_KEY),c.$FeV(b.$f16),b.$f16=null),null!==b.$f17&&(c.$BiV(a.T.HAC.TARGET_GROUP_ID_DP_KEY),c.$FeV(b.$f17),b.$f17=null),null!==b.$f3&&(c.$BiV(a.T.HAC.SOURCE_PORT_CONSTRAINT_DP_KEY),c.$FeV(b.$f3),b.$f3=null),null!==b.$f4&&(c.$BiV(a.T.HAC.TARGET_PORT_CONSTRAINT_DP_KEY),c.$FeV(b.$f4),b.$f4=null),null!==b.$f8&&(c.$BiV(a.T.PXB.GROUP_NODE_INSETS_DP_KEY),c.$GeV(b.$f8),b.$f8=null),null!==b.$f9&&(c.$BiV(a.T.BZB.LAYOUT_DP_KEY),c.$GeV(b.$f9),b.$f9=null),null!==b.$f2&&(c.$BiV(a.T.PXB.NODE_ID_DP_KEY),c.$GeV(b.$f2),b.$f2=null),null!==b.$f15&&(c.$BiV(a.T.PXB.PARENT_NODE_ID_DP_KEY),c.$GeV(b.$f15),b.$f15=null),null!==b.$f6&&(c.$BiV(a.T.PXB.GROUP_DP_KEY),c.$GeV(b.$f6),b.$f6=null),null!==b.$f&&(b.$f.$bC(),b.$f=null)}function t(b,c,d,e,f){for(var g=new a.C.GSA.$F,h=f.$nVV();h.$Zx;h.$DB()){var i=h.$lx;if(d.$mw(i)){var j=u(b,i,f,new a.C.GSA.$H(f));b.$f3.$tI(i,j),g.$m3(i)}}g.$vWV(b.$f2);var k=f.$f2.$EeV(a.T.ZBC.FAMILY_TYPE_DP_KEY),l=!1;if(1===g.$f1&&e.$nw(f)===e.$f1-1&&(l=!0),2===b.$f.$f19||4===b.$f.$f19)for(var m=0;m<g.$f1;m++)4===b.$f.$f19===2===k.$OD(f)?e.$m3(g.$Bq(m)):e.$rw(0,g.$Bq(m));else if(0!==b.$f.$f19&&1===e.$f1&&1===g.$f1)3===b.$f.$f19===2===k.$OD(f)?e.$m3(g.$Bq(0)):e.$rw(0,g.$Bq(0));else for(var n=e.$nw(f),o=e.$nw(f)+1,m=0;m<g.$f1;m++)m%2!==0||l?e.$rw(o,g.$Bq(m)):e.$rw(n,g.$Bq(m)),o++;for(var p=new a.C.GSA.$F,m=0;m<g.$f1;m++){for(var q=!1,i=g.$Bq(m),r=null,s=i.$vVV();s.$Zx;s.$DB())if((r=s.$lx)!==f){q=!0;break}if(c.$mw(r)){p.$m3(r);var v=e.$nw(i);e.$nw(f)>v?e.$rw(e.$nw(i),r):e.$rw(e.$nw(i)+1,r)}else if(q){var w=0;e.$mw(i);for(var s=i.$vVV();s.$Zx;s.$DB())w=Math.max(e.$nw(s.$lx),w);e.$rw(w,i)}}g=null;for(var m=0;m<p.$f1;m++)t(b,c,d,e,p.$Bq(m))}function u(a,b,c,d){for(var e=1,f=b.$vVV();f.$Zx;f.$DB()){var g=f.$lx;if(g!==c&&-1===d.$nw(g)){d.$m3(g);for(var h=g.$nVV();h.$Zx;h.$DB()){var i=h.$lx;i!==b&&(e+=u(a,i,g,d))}}}return e}b.lang.addMappings('yFiles-for-HTML-Complete-2.1.0.1-Evaluation (Build 1c6e00a8d772-04/06/2018)',{get _$_vid(){return['alignment','$lf',b.lang.decorators.Type('yfiles._R.C.BCC',4)]},_$_wid:['topLayout','$mf'],_$_poe:['partnerlessBelow','$ixV'],_$_dff:['offsetForFamilyNodes','$QGV'],_$_vlf:['familyNodesAlwaysBelow','$nJV'],get _$_wuf(){return['familyMembersSortingPolicy','$TOV',b.lang.decorators.Type('yfiles._R.C.CCC',4)]},_$_rvf:['spacingBetweenFamilyMembers','$pOV'],_$_oul:['FamilyTreeLayout','ZBC'],_$_pul:['FamilyType','ACC'],_$_qul:['VerticalNodeAlignment','BCC'],_$_rul:['FamilyMembersSortingPolicy','CCC'],_$$_ona:['yfiles.genealogy','yfiles._R.T','yfiles._R.C']});var v=['Unknown alignment.','DataProvider ',' is not registered to the graph.','FamilyTypeDpKey','Direct link between two individuals','Family node has more than two parent nodes','Direct link between two family nodes'];b.lang.module('_$$_ona',function(c){c._$_oul=new b.lang.ClassDefinition(function(){return{$extends:a.C.EZB,constructor:function(){a.C.EZB.call(this),this.$$init$$1(),this.$f=null,this.$FKV=!1,this.$DzV.$Xi=12,this.$f12=null},$f16:null,$f17:null,$f3:null,$f4:null,$f9:null,$f2:null,$f15:null,$f6:null,$f8:null,$f20:null,$f21:null,$f12:null,$f22:!0,$f13:30,$f14:10,$f10:!0,$f18:!1,$f7:null,_$_wid:{get:function(){if(null===this.$f12){var b=new a.C.EDC,c=b.$YGV;c.$Vm=new a.C.BEC(0),c.$fNV=60,c.$cMV=20;var d=b.$eGV;switch(this.$f7){case-1:d.$bsV=0;break;case 0:d.$bsV=0.5;break;case 1:d.$bsV=1}this.$f12=b}return this.$f12},set:function(a){this.$f12=a}},'$m!':function(){if(!this.$f22||0!==this.$f19)return!1;var b=this.$mf;return a.C.JYB.isInstance(b)&&(b=b.$Az),b instanceof a.C.EDC},_$_rvf:{get:function(){return this.$f13},set:function(b){if(b<0)throw a.QE.$m2();this.$f13=b}},_$_dff:{get:function(){return this.$f14},set:function(b){if(b<0)throw a.QE.$m2();this.$f14=b}},_$_poe:{get:function(){return this.$f10},set:function(a){this.$f10=a}},_$_vlf:{get:function(){return this.$f18},set:function(a){this.$f18=a}},_$_vid:{get:function(){return this.$f7},set:function(b){var c=0;switch(0|b){case 1:c=1;break;case 0:c=0.5;break;case-1:c=0;break;default:throw a.QE.$m18(v[0])}null!==this.$f12&&this.$f12 instanceof a.C.EDC&&(this.$f12.$eGV.$bsV=c),this.$f7=0|b}},$nNV:{set:function(a){this.$f47=a}},$NIV:{set:function(a){this.$f31=a}},$f19:0,$f:null,_$_wuf:{get:function(){return this.$f19},set:function(b){switch(0|b){case 0:case 1:case 2:case 3:case 4:this.$f19=0|b;break;default:throw a.QE.$m2()}}},$ngV:function(c){if(null===c.$EeV(a.T.ZBC.FAMILY_TYPE_DP_KEY))throw a.QE.$m28(v[1]+a.T.ZBC.FAMILY_TYPE_DP_KEY+v[2]);var d=new a.C.VSA(c),e=c.$EeV(a.T.PXB.GROUP_DP_KEY),f=c.$EeV(a.T.PXB.PARENT_NODE_ID_DP_KEY),g=c.$EeV(a.T.PXB.NODE_ID_DP_KEY),h=c.$EeV(a.T.PXB.GROUP_NODE_INSETS_DP_KEY),l=new a.C.VSA(c),m=null,n=a.T.WSA.$R(),o=a.T.WSA.$R(),p=a.T.WSA.$R(),q=a.T.WSA.$R(),r=a.T.WSA.$P(),t=null;if(i(this,c),j(this,c),null!==e){m=c.$aUV();for(var u=!1,w=c.$cUV();w.$Zx;w.$DB()){var x=w.$kx;e.$Ks(x.$f2)!==e.$Ks(x.$f3)?(m.$Ss(x,!0),l.$qWV(x),u=!0):m.$Ss(x,!1)}u||(c.$FeV(m),m=null);for(var y=c.$dUV();y.$Zx;y.$DB()){var z=y.$lx;e.$Ks(z)&&(r.$nI(g.$OD(z),z),d.$sWV(z),n.$Ss(z,!0),o.$nI(z,f.$OD(z)),p.$nI(z,g.$OD(z)),q.$nI(z,h.$OD(z)))}null!==e&&c.$BiV(a.T.PXB.GROUP_DP_KEY),null!==f&&c.$BiV(a.T.PXB.PARENT_NODE_ID_DP_KEY),null!==g&&c.$BiV(a.T.PXB.NODE_ID_DP_KEY),null!==h&&c.$BiV(a.T.PXB.GROUP_NODE_INSETS_DP_KEY)}var A=new a.T.ZBC.T1(this);if(k(this,c,A),null!==e){for(var B=new a.C.QXB(c),y=c.$dUV();y.$Zx;y.$DB()){var z=y.$lx;if(B.$vbV(z)){var C=new a.GD;n.$Ss(z,!1);for(var D=B.$tbV(z).$m1();D.$p;){var E=D.$m(),F=f.$OD(E);if(null!==F){for(var G=0;G<C.$xq;G++)if(F===f.$OD(C.$Bq(G))){F=null;break}null!==F&&C.$m(E)}}if(0===C.$xq){var E=B.$tbV(z).$DSV();o.$nI(z,f.$OD(E)),p.$nI(z,g.$OD(E))}else if(o.$nI(z,f.$OD(C.$Bq(0))),p.$nI(z,g.$OD(C.$Bq(0))),C.$xq>1){for(var H=0;H<C.$xq;H++)for(var I=r.$OD(f.$OD(C.$Bq(H))),J=0;J<C.$xq;J++){var K=r.$OD(f.$OD(C.$Bq(J)));b.lang.Object.equals(g.$OD(K),f.$OD(I))&&C.$m2(J)}if(o.$nI(z,f.$OD(C.$Bq(0))),p.$nI(z,g.$OD(C.$Bq(0))),1===C.$xq);else{null===t&&(t=new a.C.GSA.$F);var L=c.$YTV();t.$m3(L),n.$Ss(L,!0),p.$nI(L,L);for(var G=1;G<C.$xq;G++)for(var M=C.$Bq(0),N=!1;null!==M;){for(var O=r.$OD(f.$OD(M)),P=C.$Bq(G);null!==P;){var Q=r.$OD(f.$OD(P));if(Q===O){if(C.$Bq(0)!==M)for(var R=0;R<G;R++)C.$Fr(R,M);C.$Fr(G,P),N=!0;break}P=Q}if(N)break;for(var R=0;R<G;R++)C.$Fr(R,M);M=O}for(var G=0;G<C.$xq;G++)o.$nI(C.$Bq(G),L);o.$nI(L,f.$OD(C.$Bq(0))),d.$sWV(L)}}}else n.$Ss(z,!1),o.$nI(z,f.$OD(z)),p.$nI(z,g.$OD(z))}B.$mSV()}var S=new a.T.ZBC.T2(this,this.$mf),T=new a.T.ZBC.T4(d,e,n,o,p,q,S),U=new a.C.BZB;U.$Az=T;var V=new a.C.WXB.$F(U);V.$XsV=this.$m();try{new a.T.ZBC.T3(this,V,A,S).$LE(c)}finally{s(this,c),null!==e&&c.$KtW(a.T.PXB.GROUP_DP_KEY,e),null!==f&&c.$KtW(a.T.PXB.PARENT_NODE_ID_DP_KEY,f),null!==g&&c.$KtW(a.T.PXB.NODE_ID_DP_KEY,g),null!==h&&c.$KtW(a.T.PXB.GROUP_NODE_INSETS_DP_KEY,h)}if(d.$HTV(),null!==t){for(var G=0;G<t.$f1;G++)c.$FaV(t.$Bq(G));t=null}if(l.$HTV(),null!==this.$f1)for(var G=0;G<this.$f1.$xq;G++)c.$FaV(this.$f11.$Bq(G));if(null!==m){c.$KtW(a.T.RHC.AFFECTED_EDGES_DP_KEY,m);var W=new a.C.THC;W.$jCV=a.T.RHC.AFFECTED_EDGES_DP_KEY;try{W.$LE(c)}finally{c.$BiV(a.T.RHC.AFFECTED_EDGES_DP_KEY),c.$FeV(m)}}},$f5:null,$f1:null,$f11:null,$$init$$1:function(){this.$f7=0},$static:{FAMILY_TYPE_DP_KEY:null,T2:new b.lang.ClassDefinition(function(){return{$extends:a.C.CZB,$final:!0,constructor:function(b,c){a.C.CZB.call(this,c),this.$f=b,this.$f1=a.T.WSA.$Q()},$f1:null,'$m!':function(a){return this.$f1.$OD(a)},'$LE!':function(a){if(this.$Az.$LE(a),this.$f.$m())for(var b=a.$dUV();b.$Zx;b.$DB())for(var c=b.$lx,d=c.$HfV(null);d.$Zx;d.$DB()){var e=d.$kx;this.$f1.$nI(e,a.$wiV(e))}},$f:null}}),T3:new b.lang.ClassDefinition(function(){return{$extends:a.C.CZB,$final:!0,constructor:function(b,c,d,e){a.C.CZB.call(this,c),this.$f=b,this.$f2=d,this.$f1=e},$f2:null,$f1:null,'$LE!':function(b){if(this.$f.$m()){var c=new a.C.QXB(b),d=a.T.WSA.$R();f(this,c,b,d),this.$Az.$LE(b),g(this,b,c,d,this.$f1),h(this,b,c,d),b.$KtW(a.T.PXB.GROUP_NODE_INSETS_DP_KEY,this.$f.$f8);var e=this.$f1.$Az;e.$Ni=0,this.$f2.$f1=!0,this.$Az.$LE(b),e.$Ni=1,this.$f2.$f1=!1,b.$BiV(a.T.EDC.INCREMENTAL_HINTS_DP_KEY),c.$mSV()}else this.$Az.$LE(b)},$f:null}}),T4:new b.lang.ClassDefinition(function(){return{$extends:a.C.CZB,$final:!0,constructor:function(b,c,d,e,f,g,h){a.C.CZB.call(this,h),this.$f=b,this.$f1=c,this.$f2=d,this.$f5=e,this.$f4=f,this.$f3=g},'$LE!':function(b){var c=new a.C.GSA.$G(this.$f.$sVV());this.$f.$HTV(),null!==this.$f1&&(b.$KtW(a.T.PXB.GROUP_DP_KEY,this.$f2),b.$KtW(a.T.PXB.PARENT_NODE_ID_DP_KEY,this.$f5),b.$KtW(a.T.PXB.NODE_ID_DP_KEY,this.$f4),b.$KtW(a.T.PXB.GROUP_NODE_INSETS_DP_KEY,this.$f3)),this.$DJW(b),this.$f.$tWV(c),b.$BiV(a.T.PXB.GROUP_DP_KEY),b.$BiV(a.T.PXB.PARENT_NODE_ID_DP_KEY),b.$BiV(a.T.PXB.NODE_ID_DP_KEY),b.$BiV(a.T.PXB.GROUP_NODE_INSETS_DP_KEY)},$f:null,$f1:null,$f2:null,$f5:null,$f4:null,$f3:null}}),T:new b.lang.ClassDefinition(function(){return{$final:!0,constructor:function(a,b){this.$f1=a,this.$f=b},$f1:null,$f:null,'equals!':function(a){if(this===a)return!0;if(null===a||b.lang.getType(this)!==b.lang.getType(a))return!1;var c=a;return this.$f===c.$f&&this.$f1===c.$f1},'hashCode!':function(){var a=this.$f1.hashCode();return a=31*a+this.$f.hashCode()}}}),T1:new b.lang.ClassDefinition(function(){return{$final:!0,$with:[a.C.HYB],constructor:function(b){this.$f=b,this.$f1=!1,this.$f3=a.T.WSA.$R(),this.$f2=new a.T.ZBC.T1.T(this,this.$f3,this.$f.$f20)},$f1:!1,$f2:null,$f3:null,'$p!':{get:function(){return this.$f1},set:function(a){this.$f1=a}},'$LE!':function(b){if(1!==b.$ud){if(2===b.$ud&&this.$f.$f10&&this.$f.$f21.$UD(b.$td)<2&&this.$f.$f21.$UD(b.$cb)<2){for(var c=null,d=null,e=b.$dUV();e.$Zx;e.$DB()){var f=e.$lx;1!==b.$EeV(a.T.ZBC.FAMILY_TYPE_DP_KEY).$OD(f)?c=f:d=f}if(null!==c&&null!==d){var g=b.$m38(c),h=b.$m38(d);g.$AJ(-g.$my/2,0),h.$AJ(-h.$my/2,g.$Hz+this.$f.$f14);for(var i=d.$HfV(null);i.$Zx;i.$DB()){var j=i.$kx,k=b.$m37(j);k.$pC(),k.$TA=new a.C.IRA.$G(0,0),k.$UA=new a.C.IRA.$G(0,0)}var l=this.$f.$f8.$OD(c),m=new a.C.ZQA(l.top,l.left,-this.$f.$f14-b.$m38(d).$Hz,l.right);return void this.$f.$f8.$nI(c,m)}}var n=new a.C.GSA.$F;if(this.$f1)n.$NXV(b.$dUV()),n.$vWV(new a.T.ZBC.T1.T1(this,b));else{for(var o=new a.C.GSA.$F,p=new a.C.GSA.$F,e=b.$dUV();e.$Zx;e.$DB()){var f=e.$lx;1!==b.$EeV(a.T.ZBC.FAMILY_TYPE_DP_KEY).$OD(f)?o.$m3(f):p.$m3(f)}for(var q=null,r=0,s=0;s<o.$f1;s++){var u=o.$Bq(s);u.$nVV().$jx>r&&(r=u.$nVV().$jx,q=u)}o.$mw(q),n.$m3(q),t(this,o,p,n,q)}for(var v=new a.C.GSA.$F,w=new a.C.GSA.$F,x=new a.GD,y=0,z=0,A=Number.MAX_VALUE,s=0;s<n.$f1;s++){var f=n.$Bq(s),B=b.$m38(f);1===b.$EeV(a.T.ZBC.FAMILY_TYPE_DP_KEY).$OD(f)?(v.$m3(f),x.$m(s),B.$AJ(y+Math.max((this.$f.$f13-B.$my)/2,B.$my/4),-B.$Hz/2),y=y+Math.max(1.5*B.$my,this.$f.$f13)|0):(w.$m3(f),A=Math.min(B.$Hz,A),z=Math.max(B.$Hz,z),B.$AJ(y,-B.$Hz/2),y=y+B.$my|0)}if(0!==this.$f.$f7)for(var s=0;s<w.$f1;s++){var B=b.$m38(w.$Bq(s));1===this.$f.$f7?B.$AJ(B.$Xx,-(B.$Hz-A/2)):B.$AJ(B.$Xx,-A/2)}for(var C=a.DE.$m10(n.$f1),D=-2,s=0;s<v.$f1;s++){var E=v.$Bq(s),F=!1,G=a.WD.$m8(x.$Bq(s));if(this.$f.$f18||D===G-1&&0===C[D])F=!0;else for(var H=E.$vVV();H.$Zx;H.$DB()){var I=H.$lx,J=n.$nw(I)-G;if(Math.abs(J)>2){F=!0;break}}if(F)C[G]=1;else{for(var K=new a.C.IRA.$G(0,0),i=E.$HfV(null);i.$Zx;i.$DB()){var j=i.$kx,k=b.$m37(j);if(k.$pC(),0===this.$f.$f7)k.$TA=K;else{var B=b.$m38(j.$f2);b.$HuW(j,new a.C.IRA.$G(B.$Xx+B.$my/2,0))}k.$UA=K}v.$m5(s),x.$m2(s),s--}D=G}var L,M=z/2;1===this.$f.$f7?M=A/2:-1===this.$f.$f7&&(M=z-A/2),L=M;for(var s=0;s<v.$f1;s++){for(var E=v.$Bq(s),N=a.WD.$m8(x.$Bq(s)),O=0,P=E.$vVV();P.$Zx;P.$DB()){for(var Q=n.$nw(P.$lx),R=Math.min(N,Q),S=Math.max(N,Q),T=0,U=R;U<=S;U++)T+=C[U];O=Math.max(T,O)}var B=b.$m38(E),V=M+this.$f.$f14+(B.$Hz+this.$f.$f14)*(O-1);B.$AJ(B.$Xx,V),L=Math.max(L,V+B.$Hz)}for(var W=0;W<w.$f1;W++){for(var u=w.$Bq(W),X=n.$nw(u),Y=0,Z=new a.C.NQA.$F,i=u.$tgV(null);i.$Zx;i.$DB()){var j=i.$kx;C[n.$nw(j.$f3)]>0&&(Z.$m3(j),Y++)}if(Y>0){for(var $=b.$m38(u),_=$.$my/(Y+1),aa=a.DE.$m10(Z.$f1),ba=a.DE.$m10(Z.$f1),s=0;s<Z.$f1;s++){aa[s]=n.$nw(Z.$Bq(s).$f3)-X,aa[s]>0&&(aa[s]-=2*n.$f1),ba[s]=_;for(var U=0;U<s;U++)aa[s]>aa[U]?ba[U]+=_:ba[s]+=_}for(var s=0;s<Z.$f1;s++){var j=Z.$Bq(s),k=b.$m37(j);k.$pC(),k.$UA=new a.C.IRA.$G(0,0);var ca=ba[s],da=b.$m38(j.$f3),ea=da.$Yx+da.$Hz/2,fa=b.$m38(u);k.$TA=new a.C.IRA.$G(ca-fa.$my/2,0),k.$PJ(fa.$Xx+ca,ea)}}}var l=this.$f.$f8.$OD(w.$Bq(0)),ga=l.top,ha=l.bottom;null!==l&&0===this.$f.$f7?ga=L-M:null!==l&&1===this.$f.$f7&&(ha=M-L),this.$f.$f8.$nI(w.$Bq(0),new a.C.ZQA(ga,l.left,ha,l.right))}},$f:null,$static:{T:new b.lang.ClassDefinition(function(){return{$final:!0,$with:[a.C.KTA],constructor:function(a,b,c){this.$f1=a,this.$f=b,this.$f2=c},$f:null,$f2:null,'$sw!':function(b,c){var d=a.T.QSA.$m(this.$f.$UD(b),this.$f.$UD(c));return 0!==d?d:a.T.QSA.$m(this.$f2.$UD(b),this.$f2.$UD(c))},$f1:null}}),T1:new b.lang.ClassDefinition(function(){return{$final:!0,$with:[a.C.KTA],constructor:function(a,b){this.$f1=a,this.$f=b},$f:null,'$sw!':function(b,c){return a.T.QSA.$N(this.$f.$caV(b),this.$f.$caV(c))},$f1:null}})}}}),$clinit:function(){a.T.ZBC.FAMILY_TYPE_DP_KEY=new a.C.LQA(a.C.ACC.$class,a.C.ZBC.$class,v[3])}}}})}),b.lang.module('_$$_ona',function(a){a._$_pul=new b.lang.EnumDefinition(function(){return{FAMILY:1,MALE:2,FEMALE:3}})}),b.lang.module('_$$_ona',function(a){a._$_qul=new b.lang.EnumDefinition(function(){return{TOP:-1,CENTER:0,BOTTOM:1}})}),b.lang.module('_$$_ona',function(a){a._$_rul=new b.lang.EnumDefinition(function(){return{NO_SORTING:0,FEMALE_FIRST:1,FEMALE_ALWAYS_FIRST:2,MALE_FIRST:3,MALE_ALWAYS_FIRST:4}})})}(y.lang.module('yfiles._R'),y));export const FamilyTreeLayout=y.genealogy.FamilyTreeLayout;export const FamilyType=y.genealogy.FamilyType;export const VerticalNodeAlignment=y.genealogy.VerticalNodeAlignment;export const FamilyMembersSortingPolicy=y.genealogy.FamilyMembersSortingPolicy;export default y;
